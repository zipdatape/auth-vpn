# RADIUS Server - Docker Compose Configuration

## Overview
This `docker-compose.yml` file is designed to deploy a RADIUS authentication server integrated with Azure. It uses an image from Docker Hub and manages environment variables through an `.env` file.

## Services

### RADIUS Server
- Exposes the specified RADIUS port over UDP.
- Loads configuration from a `.env` file.
- Stores logs and scripts in mounted volumes.
- Restarts automatically unless stopped manually.
- Connects to the `radius-net` network.

## Configuration

### Environment Variables
These variables should be defined in the `.env` file:

```plaintext
AZURE_TENANT_ID=<your_tenant_id>
AZURE_CLIENT_ID=<your_client_id>
AZURE_CLIENT_SECRET=<your_client_secret>
RADIUS_SECRET=<your_radius_secret>
PORT=<radius_port>
API_PORT=<api_port>
DB_HOST=<database_host>
DB_PORT=<database_port>
DB_NAME=<database_name>
DB_USER=<database_user>
DB_PASSWORD=<database_password>
DEFAULT_DOMAIN=<default_domain>
RADIUS_SERVER_ID=<radius_server_id>
DEBUG=*
```

## Usage

### Start the Service
To start the RADIUS server, run:
```sh
docker-compose up -d
```

### Stop the Service
To stop the server, run:
```sh
docker-compose down
```

## Network Configuration

- Uses a custom bridge network named `radius-net`.
- Allows inter-container communication within the network.

## Volumes

- `./logs:/app/logs` - Stores logs generated by the server.
- `./scripts:/app/scripts` - Stores scripts used within the server environment.

## Docker Compose Configuration

```yaml
version: '3.8'
services:
  app_azure:
    build:
      context: .
      dockerfile: Dockerfile
    image: auth-vpn
    container_name: app_azure
    ports:
      - "3000:3000"
    volumes:
      - ./server.key:/app/certs/server.key:ro
      - ./server.crt:/app/certs/server.crt:ro
    environment:
      - NODE_ENV=production
      - PORT=3000
      - SSL_KEY_PATH=/app/certs/server.key
      - SSL_CERT_PATH=/app/certs/server.crt
      - DB_HOST=radius-mysql
    env_file:
      - .env.local
    restart: unless-stopped
    networks:
      - app-network
    user: root
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "7"
        compress: "true"

```

## Notes
- Ensure your `.env` file is properly configured before starting the service.
- The image is pulled from Docker Hub: `de0xys/radius_azure:latest`.
- Modify the `DEBUG` variable for detailed logging during troubleshooting.
